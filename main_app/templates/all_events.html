{% extends 'base.html' %} {% block content %}
<div class="events-container">

  <h2>All Volunteering Events</h2>

  {% for event in events %}

  <div class="card">
    <div class="card-content">
      <span class="card-title">
        {{ event.title }}</span>
      <p>
        {{ event.description }}
      </p>
      <p>
        {{ event.date }},
        {{ event.time }}
      </p>

      <p>
        {{ event.location }}
      </p>
      <p>Organised by
        {{ event.organizer }}
      </p>
      <p>Likes:
        {{ event.like_set.count }}
      </p>
      <p>Volunteers required:
        {{ event.volunteers_needed }}
      </p>
      <p>No of Volunteers:
        {{ event.volunteer_count }}
      </p>
    </div>
    <div class="card-action">
      <a href="{% url 'volunteering_event_detail' event.id %}">View</a>
      {% if event.id in liked_events %}
      <a href="{% url 'unlike_event' event.id %}">
        Unlike
      </a>
      {% else %}
      <a href="{% url 'like_event' event.id %}">
        Like
      </a>
      {% endif %}
      {% if user in event.volunteers.all %}
      <form action="{% url 'withdraw_volunteer' event.id %}" method="post">
        {% csrf_token %}
        <button id="withdraw" type="submit">Withdraw as Volunteer</button>
      </form>
      {% else %}
      <form action="{% url 'add_volunteer' event.id %}" method="post">
        {% csrf_token %}
        <button id="volunteer" type="submit">Volunteer</button>
      </form>
    </div>
    {% endif %}
  </div>


  {% empty %}
  <li>No events yet</li>
</div>
</div>
{% endfor %} {% endblock %}